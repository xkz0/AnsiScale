# AnsiScale 
### ðŸª„ Auto-magically Generate Ansible Inventory Files From Your Tailnet ðŸª„
##### AnsiScale uses the a mixture between Tailscale ACL tags and Custom assigned values 
(which can be assigned en-masse using the auto tagger - https://github.com/xkz0/tailscale-auto-tagger)
##### All you need to do is generate an API key at the link below and then enter it when the script opens.
https://login.tailscale.com/admin/settings/keys 
##### AnsiScale then looks at your Tailnet by using two methods:
###### ACL Tags - You will be given suggested names for your parent/child inventory values based on the ACL tags you have set (you can also use custom values)
###### Custom Tags - If you have given custom attributes using either the TS API or my Auto-Tagger, then you can use those to generate parent/child names as well
##### Once you have selected either tags/custom tags, the script will then generate you an inventory.yaml file with all of the associated hosts inside their respective groups
##### You also have the option to add in your ssh keys to the inventory file, this will follow the pattern generated by my ssh_key_management tool 
(https://github.com/xkz0/ssh_key_management)
###### I want to state none of this is revolutionary, I just manage hundreds of devices at work and my inventory is constantly increasing/changing so this makes it very easy to capture changes I've missed.
### Here's an example inventory generated in about 30 seconds:
```
# Ansible inventory generated from Tailscale status
---
tag:client1:
  children:
    tag:cameras:
      hosts:
        "Camera2 camera2.example.com":
          ansible_host: camera2.example.com
        "Camera1 camera1.example.com":
          ansible_host: camera1.example.com
    tag:clients:
      hosts:
        "mediabox1 mediabox1.example.com":
          ansible_host: mediabox1.example.com
        "laptop1 laptop1.example.com":
          ansible_host: laptop1.example.com
        "tablet1 tablet1.example.com":
          ansible_host: tablet1.example.com
        "phone1 phone1.example.com":
          ansible_host: phone1.example.com
        "camera3 camera3.example.com":
          ansible_host: camera3.example.com
        "raspi1 raspi1.example.com":
          ansible_host: raspi1.example.com
        "desktop1 desktop1.example.com":
          ansible_host: desktop1.example.com
        "laptop2 laptop2.example.com":
          ansible_host: laptop2.example.com
tag:server:
  children:
    tag:servers:
      hosts:
        "nas1 nas1.example.com":
          ansible_host: nas1.example.com
        "nas2 nas2.example.com":
          ansible_host: nas2.example.com
        "testserver1 testserver1.example.com":
          ansible_host: testserver1.example.com
unknown:
  hosts:
    "desktop2 desktop2.example.com":
      ansible_host: desktop2.example.com
    "desktop3 desktop3.example.com":
      ansible_host: desktop3.example.com
```
